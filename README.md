# Безопасная настройка сервера БД: ограничение сетевого доступа, управление пользователями и привилегиями.
Реферат по дисциплине «Администрирование информационных систем»
## ОГЛАВЛЕНИЕ

- [ВВЕДЕНИЕ](#введение)
- [1 ТЕОРЕТИЧЕСКАЯ ЧАСТЬ](#1-теоретическая-часть)
  - [1.1 Основные принципы и угрозы безопасности серверов баз данных](#11-основные-принципы-и-угрозы-безопасности-серверов-баз-данных)
  - [1.2 Стратегии ограничения сетевого доступа: от изоляции до брандмауэров](#12-стратегии-ограничения-сетевого-доступа-от-изоляции-до-брандмауэров)
  - [1.3 Модели управления пользователями и привилегиями. Принцип наименьших прав](#13-модели-управления-пользователями-и-привилегиями-принцип-наименьших-прав)
  - [1.4 Роль шифрования и аудита в комплексной защите данных](#14-роль-шифрования-и-аудита-в-комплексной-защите-данных)
- [2 ПРАКТИЧЕСКАЯ ЧАСТЬ](#2-практическая-часть)
  - [2.1 Пример безопасной настройки сервера MariaDB/MySQL на базе Linux](#21-пример-безопасной-настройки-сервера-mariadbmysql-на-базе-linux)
- [3 ЗАКЛЮЧЕНИЕ](#3-заключение)
- [4 СПИСОК ЛИТЕРАТУРЫ](#4-список-литературы)

## ВВЕДЕНИЕ

Эволюция информационных систем привела к тому, что базы данных стали центральным хранилищем критически важных активов организаций: от персональных данных клиентов и финансовой отчётности до коммерческих тайн и операционной логики приложений. Рост сложности архитектур, переход к облачным и гибридным моделям развёртывания, а также ужесточение регуляторных требований (таких как GDPR, PCI DSS, ФЗ-152) многократно повысили значимость вопросов безопасности данных.

Традиционные подходы к администрированию, основанные на ручной настройке и реагировании на инциденты, перестали соответствовать современным вызовам. Сервер базы данных, оставленный с настройками по умолчанию или с избыточными сетевыми разрешениями, превращается в лёгкую мишень для злоумышленников. Последствия успешной атаки — утечка информации, её повреждение или полная недоступность - несут прямые финансовые и репутационные потери.

В этих условиях безопасная настройка сервера БД перестаёт быть факультативной рекомендацией и становится обязательным стандартом эксплуатации. Этот процесс требует системного подхода, сочетающего несколько взаимосвязанных слоёв защиты: строгое ограничение сетевого доступа, детализированное управление учётными записями и их правами, шифрование данных как в покое, так и при передаче, а также непрерывный мониторинг и аудит. Понимание и грамотная реализация этих принципов - ключевая компетенция администратора, отвечающего за надёжность и конфиденциальность информационных активов компании.

## 1 ТЕОРЕТИЧЕСКАЯ ЧАСТЬ

## 1.1 Основные принципы и угрозы безопасности серверов баз данных

Безопасность сервера БД строится на трёх фундаментальных принципах (триада CIA): Конфиденциальность (обеспечение доступа к данным только авторизованным субъектам), целостность (гарантия точности и неизменности данных) и доступность (обеспечение бесперебойного доступа к данным для авторизованных пользователей). Нарушение любого из них приводит к компрометации системы.

Основные векторы угроз, против которых направлены меры защиты, включают:

  - **Несанкционированный сетевой доступ**: Атаки из внешней сети (например, сканирование портов, эксплуатация уязвимостей в сетевых службах) или из внутренней сети (перемещение внутри периметра после первоначального взлома).

- **Непривилегированный доступ к данным**: Получение доступа к информации пользователями или приложениями, обладающими избыточными правами, либо посредством компрометации учётных данных.

- **Внедрение SQL-кода (SQL-инъекция)**: Одна из самых распространённых атак на уровне приложения, позволяющая выполнить произвольные команды в БД.

- **Внутренние угрозы**: Умышленные или случайные действия инсайдеров (сотрудников, администраторов).

- **Уязвимости программного обеспечения**: Ошибки в СУБД, операционной системе или библиотеках.

Защита начинается с чёткого понимания того, что сервер БД не должен быть «открыт миру». Его конфигурация должна следовать принципу минимально необходимой функциональности и принципу наименьших привилегий.

  ## 1.2 Стратегии ограничения сетевого доступа: от изоляции до брандмауэров

  Сеть - это первая линия обороны. Цель - максимально сузить «атакующую поверхность».
  
Сетевая изоляция и сегментация: Сервер БД должен быть размещён в наиболее защищённом сегменте сети. Как показано в методических указаниях к ЛР №1, даже в учебной среде используется разделение интерфейсов: один - для управления, другой (изолированный) - для внутреннего взаимодействия с приложением. В production - среде это реализуется через выделенные VLAN, приватные подсети в облаке (Private Subnet) или даже полную физическую изоляцию.

Строгая настройка биндинга службы СУБД: Параметр `bind - address` в конфигурации (напр., `/etc/mysql/mariadb.conf.d/50-server.cnf`) должен указывать не на `0.0.0.0` (все интерфейсы), а на конкретный IP - адрес внутреннего интерфейса, например, `192.168.56.104`. Это предотвращает прослушивание порта БД на внешних сетевых картах.

Контроль доступа на уровне хоста в СУБД: При создании пользователей БД необходимо явно указывать, с каких хостов разрешено подключение (`user'@'192.168.56.%`). Запрет `user'@'%` (со всех хостов) должен быть исключением, а не правилом. Учётная запись `root` должна быть заблокирована для удалённого доступа.

Применение брандмауэров: Настройка правил межсетевого экрана (iptables, firewalld, облачные Security Groups) обязательна. Правило должно явно разрешать входящие соединения на порт СУБД (например, 3306) только с IP - адресов доверенных серверов приложений или подсистем управления, а все остальные - отклонять.

Использование туннелей и VPN: Для удалённого администрирования предпочтительно использовать доступ через SSH - туннель или VPN, а не прямое открытие порта СУБД в интернет.

## 1.3 Модели управления пользователями и привилегиями. Принцип наименьших прав

Управление доступом внутри СУБД - это тонкий инструмент, требующий дисциплины.

Отказ от использования root для приложений: Для каждого сервиса или приложения создаётся отдельная учётная запись в БД.

Детализированное назначение привилегий: Права выдаются не на всю БД (`GRANT ALL ON database.*`), а на конкретные операции (SELECT, INSERT, UPDATE, DELETE, EXECUTE) для конкретных таблиц или схем. Например, отчёто - формирующему сервису может выдаваться только SELECT на определённые таблицы.

Регулярный аудит учётных записей: Необходимо периодически просматривать список пользователей (SELECT User, Host FROM mysql.user;) и отзывать права у неиспользуемых или устаревших аккаунтов.

Защита учётных данных: Пароли должны быть сложными, храниться не в коде приложения, а в специализированных хранилищах секретов (HashiCorp Vault, AWS Secrets Manager) или, как минимум, в конфигурационных файлах с ограниченными правами доступа (`chmod 600`). Рекомендуется использовать скрипт `mysql_secure_installation` для начального усиления безопасности.

Ролевая модель (где поддерживается): В современных СУБД (PostgreSQL, MySQL 8.0+) эффективно использование ролей для группировки привилегий и их централизованного назначения группам пользователей.

## 1.4 Роль шифрования и аудита в комплексной защите данных

Защита данных «в покое» и «в движении» - обязательный элемент.

Шифрование соединений (SSL/TLS): Настройка обязательного использования SSL для всех соединений с БД предотвращает перехват и подмену данных (`man-in-the-middle`). Для этого в СУБД генерируются и настраиваются сертификаты.

Шифрование данных на диске: Современные СУБД поддерживают прозрачное шифрование табличных пространств (например, InnoDB Tablespace Encryption в MySQL/MariaDB). Это защищает данные в случае физического доступа к файлам на диске.

Аудит и мониторинг: Включение журналирования критичных событий (успешные и неуспешные попытки входа, выполнение административных команд) позволяет отслеживать подозрительную активность и проводить расследования инцидентов. Решения вроде MariaDB Audit Plugin или сторонние средства (OSSEC, Wazuh) помогают автоматизировать этот процесс.

## 2 ПРАКТИЧЕСКАЯ ЧАСТЬ

### 2.1 Пример безопасной настройки сервера MariaDB/MySQL на базе Linux

Рассмотрим практические шаги по укреплению безопасности сервера MariaDB после его базовой установки. Действия выполняются от имени пользователя root в СУБД.

#### 1) Выполнение базового скрипта усиления безопасности:

```bash
mysql_secure_installation
```

В ходе выполнения скрипта:
- Задаётся пароль для root (если не задан)
- Удаляются анонимные пользователи (`Remove anonymous users? → Y`)
- Запрещается удалённый вход для root (`Disallow root login remotely? → Y`)
- Удаляется тестовая база `test` (`Remove test database and access to it? → Y`)
- Перезагружаются таблицы привилегий

#### 2) Настройка сетевого биндинга:

Редактируем файл конфигурации:
```bash
nano /etc/mysql/mariadb.conf.d/50-server.cnf
```

Находим и изменяем параметр:
```ini
bind-address = 192.168.56.104  # Вместо 0.0.0.0
```

Перезапускаем службу:
```bash
systemctl restart mariadb
```

#### 3) Создание привилегированного пользователя для администрации:

```sql
-- Создаём администратора с доступом только с локального хоста
CREATE USER 'db_admin'@'localhost' IDENTIFIED BY 'Strong!AdminPass123';
GRANT ALL PRIVILEGES ON *.* TO 'db_admin'@'localhost' WITH GRANT OPTION;
FLUSH PRIVILEGES;
```

#### 4) Создание пользователя для веб-приложения с минимальными правами:

```sql
-- Создаём базу данных для приложения
CREATE DATABASE app_db CHARACTER SET utf8mb4 COLLATE utf8mb4_unicode_ci;

-- Создаём пользователя с доступом только с IP сервера приложений
CREATE USER 'app_user'@'192.168.56.105' IDENTIFIED BY 'AnotherSecurePass!456';

-- Даём права ТОЛЬКО на необходимые операции
GRANT SELECT, INSERT, UPDATE, DELETE ON app_db.* TO 'app_user'@'192.168.56.105';
FLUSH PRIVILEGES;
```

#### 5) Настройка брандмауэра (на примере UFW в Debian/Ubuntu):

```bash
# Разрешаем подключения к порту MariaDB только с конкретного IP
ufw allow from 192.168.56.105 to any port 3306 comment 'App Server Access'

# Явный запрет для всех остальных
ufw deny 3306/tcp
```

#### 6) Проверка конфигурации:

```bash
# Проверяем, что сервер слушает только на нужном интерфейсе
ss -tlnp | grep 3306
```

```sql
-- Проверяем список пользователей и их хосты
SELECT User, Host FROM mysql.user;

-- Проверяем права прикладного пользователя
SHOW GRANTS FOR 'app_user'@'192.168.56.105';
```

Данная конфигурация демонстрирует реализацию ключевых принципов: сегментация (привязка к конкретному IP), минимальные привилегии (ограниченные права `app_user`), отказ от удалённого root и использование брандмауэра.

## 3 ЗАКЛЮЧЕНИЕ

Безопасная настройка сервера базы данных - это не разовое мероприятие, а непрерывный процесс, основанный на глубоком понимании архитектуры системы и возможных векторов атак. Как показано в реферате, фундаментом защиты является многослойный подход, в котором сетевые ограничения создают внешний периметр, а детализированное управление пользователями и правами защищает данные изнутри.

Теоретический анализ позволил выделить ключевые принципы: принцип наименьших привилегий, сегментацию сети, обязательное шифрование и всеобъемлющий аудит. Практическая часть, основанная на материалах лабораторных работ, наглядно продемонстрировала, как эти принципы воплощаются в конкретных командах и конфигурационных файлах при работе с MariaDB/MySQL в среде Linux.

Важно подчеркнуть, что безопасность - это компромисс между уровнем защиты, производительностью и удобством эксплуатации. Задача администратора - найти оптимальный баланс, используя современные инструменты и следуя проверенным практикам. Регулярное обновление ПО, анализ логов, пересмотр прав доступа и моделирование угроз должны стать рутинной частью жизненного цикла сервера БД. Только такой комплексный и системный подход позволяет обеспечить конфиденциальность, целостность и доступность данных в условиях постоянно эволюционирующих киберугроз.

## 4 СПИСОК ЛИТЕРАТУРЫ

1. MariaDB Foundation. MariaDB Security Guide. – Электронный ресурс. Режим доступа: https://mariadb.com/kb/en/security/
2. Oracle Corporation. MySQL 8.0 Reference Manual: Security. – Электронный ресурс. Режим доступа: https://dev.mysql.com/doc/refman/8.0/en/security.html
3. Национальный институт стандартов и технологий США (NIST). Special Publication 800-123: Guide to General Server Security. – Электронный ресурс. – Режим доступа: https://nvlpubs.nist.gov/nistpubs/Legacy/SP/nistspecialpublication800-123.pdf
4. Open Web Application Security Project (OWASP). OWASP Top Ten. – Электронный ресурс. Режим доступа: https://owasp.org/www-project-top-ten/
5. CIS (Center for Internet Security). CIS Benchmarks for MySQL, MariaDB, Linux. – Электронный ресурс. Режим доступа: https://www.cisecurity.org/cis-benchmarks/
6. PCI Security Standards Council. PCI DSS Quick Reference Guide. – Электронный ресурс. Режим доступа: https://www.pcisecuritystandards.org/
7. HashiCorp. Best Practices for Managing Database Secrets with Vault. – Электронный ресурс. – Режим доступа: https://www.hashicorp.com/resources/best-practices-managing-database-secrets-with-vault
8. Методические указания к лабораторной работе №1 «Система виртуализации. Система управления контентом».
9. Методические указания к лабораторной работе №2 «Проектирование и создание базы данных информационной системы. Реализация структуры БД с использованием ORM».
10. Red Hat. Linux System Security Best Practices. – Электронный ресурс. Режим доступа: https://www.redhat.com/en/topics/security
